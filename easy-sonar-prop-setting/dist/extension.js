"use strict";var B=Object.create;var u=Object.defineProperty;var M=Object.getOwnPropertyDescriptor;var j=Object.getOwnPropertyNames;var N=Object.getPrototypeOf,R=Object.prototype.hasOwnProperty;var L=(t,r)=>{for(var a in r)u(t,a,{get:r[a],enumerable:!0})},b=(t,r,a,p)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of j(r))!R.call(t,i)&&i!==a&&u(t,i,{get:()=>r[i],enumerable:!(p=M(r,i))||p.enumerable});return t};var w=(t,r,a)=>(a=t!=null?B(N(t)):{},b(r||!t||!t.__esModule?u(a,"default",{value:t,enumerable:!0}):a,t)),W=t=>b(u({},"__esModule",{value:!0}),t);var D={};L(D,{activate:()=>q,deactivate:()=>z});module.exports=W(D);var s=w(require("vscode")),g=w(require("fs")),S=w(require("path"));function q(t){console.log('Congratulations, your extension "easy-sonar-prop-setting" is now active!');let r=(o,n,e=!1)=>{let c=s.workspace.workspaceFolders;if(!c){s.window.showErrorMessage("No workspace folder is open");return}let A=c[0].uri.fsPath,C=s.workspace.getConfiguration("easySonarPropSetting").get("propertiesFileName","sonar-project.properties"),f=S.join(A,C),F=o.fsPath,d=`./${S.posix.relative(A,F)}`;if(g.existsSync(f)){let U=g.readFileSync(f,"utf-8").split(`
`),l=[],h=!1;for(let m of U)if(m.startsWith(`${n}=`))if(h=!0,e)l.push(`${n}=${d}`);else{let v=m.substring(n.length+1).split(", ");if(!v.includes(d))v.push(d),l.push(`${n}=${v.join(", ")}`);else{s.window.showErrorMessage(`${d} is already in ${n}`);return}}else l.push(m);h||l.push(`${n}=${d}`),g.writeFileSync(f,l.join(`
`)),s.window.showInformationMessage(`${n} set to ${d}`)}else s.window.showErrorMessage(`${C} file not found in the root path`)},a=s.commands.registerCommand("easy-sonar-prop-setting.addSonarSources",o=>{let e=s.workspace.getConfiguration("easySonarPropSetting").get("sonarSourcesKey","sonar.sources");r(o,e)}),p=s.commands.registerCommand("easy-sonar-prop-setting.addSonarTests",o=>{let e=s.workspace.getConfiguration("easySonarPropSetting").get("sonarTestsKey","sonar.tests");r(o,e)}),i=s.commands.registerCommand("easy-sonar-prop-setting.clearAndAddSonarSources",o=>{let n=s.workspace.getConfiguration("easySonarPropSetting"),e=n.get("sonarSourcesKey","sonar.sources"),c=n.get("enableClearAndAddSonarSources",!0);r(o,e,c)}),T=s.commands.registerCommand("easy-sonar-prop-setting.clearAndAddSonarTests",o=>{let n=s.workspace.getConfiguration("easySonarPropSetting"),e=n.get("sonarTestsKey","sonar.tests"),c=n.get("enableClearAndAddSonarTests",!0);r(o,e,c)}),x=s.commands.registerCommand("easy-sonar-prop-setting.addSonarTestInclusions",o=>{let e=s.workspace.getConfiguration("easySonarPropSetting").get("sonarTestInclusionsKey","sonar.test.inclusions");r(o,e)}),P=s.commands.registerCommand("easy-sonar-prop-setting.clearAndAddSonarTestInclusions",o=>{let n=s.workspace.getConfiguration("easySonarPropSetting"),e=n.get("sonarTestInclusionsKey","sonar.test.inclusions"),c=n.get("enableClearAndAddSonarTestInclusions",!0);r(o,e,c)}),K=s.commands.registerCommand("easy-sonar-prop-setting.addSonarExclusions",o=>{let e=s.workspace.getConfiguration("easySonarPropSetting").get("sonarExclusionsKey","sonar.exclusions");r(o,e)}),E=s.commands.registerCommand("easy-sonar-prop-setting.clearAndAddSonarExclusions",o=>{let n=s.workspace.getConfiguration("easySonarPropSetting"),e=n.get("sonarExclusionsKey","sonar.exclusions"),c=n.get("enableClearAndAddSonarExclusions",!1);r(o,e,c)}),$=s.commands.registerCommand("easy-sonar-prop-setting.runSonarScanner",()=>{let o=s.workspace.workspaceFolders;if(!o){s.window.showErrorMessage("No workspace folder is open");return}let n=o[0].uri.fsPath,e=s.window.createTerminal("Sonar Scanner");e.show(),e.sendText(`cd ${n}`),e.sendText("sonar-scanner")});t.subscriptions.push(a,p,i,T,x,P,K,E,$);let y=s.workspace.getConfiguration("easySonarPropSetting"),k=y.get("showRunSonarScannerButton",!0),I=y.get("runSonarScannerButtonText","$(play) Run Sonar Scanner");if(k){let o=s.window.createStatusBarItem(s.StatusBarAlignment.Left,100);o.text=I,o.command="easy-sonar-prop-setting.runSonarScanner",o.show(),t.subscriptions.push(o)}}function z(){}0&&(module.exports={activate,deactivate});
