"use strict";var M=Object.create;var S=Object.defineProperty;var j=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var R=Object.getPrototypeOf,L=Object.prototype.hasOwnProperty;var W=(t,r)=>{for(var a in r)S(t,a,{get:r[a],enumerable:!0})},T=(t,r,a,u)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of N(r))!L.call(t,i)&&i!==a&&S(t,i,{get:()=>r[i],enumerable:!(u=j(r,i))||u.enumerable});return t};var w=(t,r,a)=>(a=t!=null?M(R(t)):{},T(r||!t||!t.__esModule?S(a,"default",{value:t,enumerable:!0}):a,t)),q=t=>T(S({},"__esModule",{value:!0}),t);var G={};W(G,{activate:()=>z,deactivate:()=>D});module.exports=q(G);var s=w(require("vscode")),l=w(require("fs")),f=w(require("path"));function z(t){console.log('Congratulations, your extension "easy-sonar-prop-setting" is now active!');let r=(o,n,e=!1)=>{let c=s.workspace.workspaceFolders;if(!c){s.window.showErrorMessage("No workspace folder is open");return}let A=c[0].uri.fsPath,C=s.workspace.getConfiguration("easySonarPropSetting").get("propertiesFileName","sonar-project.properties"),m=f.join(A,C),F=o.fsPath,d=`./${f.relative(A,F)}`.replace(/\\/g,"/");if(l.existsSync(m)){let U=l.readFileSync(m,"utf-8").split(`
`),g=[],h=!1;for(let p of U)if(p.startsWith(`${n}=`)||p.startsWith(`${n} =`))if(h=!0,e)g.push(`${n} = ${d}`);else{let v=p.includes("=")?p.split("=")[1].split(",").map(B=>B.trim()):[];if(!v.includes(d))v.push(d),g.push(`${n} = ${v.join(", ")}`);else{s.window.showErrorMessage(`${d} is already in ${n}`);return}}else g.push(p);h||g.push(`${n} = ${d}`),l.writeFileSync(m,g.join(`
`)),s.window.showInformationMessage(`${n} set to ${d}`)}else s.window.showErrorMessage(`${C} file not found in the root path`)},a=s.commands.registerCommand("easy-sonar-prop-setting.addSonarSources",o=>{let e=s.workspace.getConfiguration("easySonarPropSetting").get("sonarSourcesKey","sonar.sources");r(o,e)}),u=s.commands.registerCommand("easy-sonar-prop-setting.addSonarTests",o=>{let e=s.workspace.getConfiguration("easySonarPropSetting").get("sonarTestsKey","sonar.tests");r(o,e)}),i=s.commands.registerCommand("easy-sonar-prop-setting.clearAndAddSonarSources",o=>{let n=s.workspace.getConfiguration("easySonarPropSetting"),e=n.get("sonarSourcesKey","sonar.sources"),c=n.get("enableClearAndAddSonarSources",!0);r(o,e,c)}),b=s.commands.registerCommand("easy-sonar-prop-setting.clearAndAddSonarTests",o=>{let n=s.workspace.getConfiguration("easySonarPropSetting"),e=n.get("sonarTestsKey","sonar.tests"),c=n.get("enableClearAndAddSonarTests",!0);r(o,e,c)}),x=s.commands.registerCommand("easy-sonar-prop-setting.addSonarTestInclusions",o=>{let e=s.workspace.getConfiguration("easySonarPropSetting").get("sonarTestInclusionsKey","sonar.test.inclusions");r(o,e)}),P=s.commands.registerCommand("easy-sonar-prop-setting.clearAndAddSonarTestInclusions",o=>{let n=s.workspace.getConfiguration("easySonarPropSetting"),e=n.get("sonarTestInclusionsKey","sonar.test.inclusions"),c=n.get("enableClearAndAddSonarTestInclusions",!0);r(o,e,c)}),K=s.commands.registerCommand("easy-sonar-prop-setting.addSonarExclusions",o=>{let e=s.workspace.getConfiguration("easySonarPropSetting").get("sonarExclusionsKey","sonar.exclusions");r(o,e)}),$=s.commands.registerCommand("easy-sonar-prop-setting.clearAndAddSonarExclusions",o=>{let n=s.workspace.getConfiguration("easySonarPropSetting"),e=n.get("sonarExclusionsKey","sonar.exclusions"),c=n.get("enableClearAndAddSonarExclusions",!1);r(o,e,c)}),E=s.commands.registerCommand("easy-sonar-prop-setting.runSonarScanner",()=>{let o=s.workspace.workspaceFolders;if(!o){s.window.showErrorMessage("No workspace folder is open");return}let n=o[0].uri.fsPath,e=s.window.createTerminal("Sonar Scanner");e.show(),e.sendText(`cd ${n}`),e.sendText("sonar-scanner")});t.subscriptions.push(a,u,i,b,x,P,K,$,E);let y=s.workspace.getConfiguration("easySonarPropSetting"),k=y.get("showRunSonarScannerButton",!0),I=y.get("runSonarScannerButtonText","$(play) Run Sonar Scanner");if(k){let o=s.window.createStatusBarItem(s.StatusBarAlignment.Left,100);o.text=I,o.command="easy-sonar-prop-setting.runSonarScanner",o.show(),t.subscriptions.push(o)}}function D(){}0&&(module.exports={activate,deactivate});
